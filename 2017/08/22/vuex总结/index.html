<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title> vuex总结 · yjm </title>
    <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="browsermode" content="application">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="yjm">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name= "format-detection" content="telephone=no" />
<meta name="keywords" content="nlvi, Nlvi" />





    <meta name="keywords" content="vuex, Nlvi" />

<link rel="stylesheet" href="/style/style.css">
<script src="/script/jquery.min.js"></script>
<script>
    var CONFIG = {
        title: "yjm",
        author: "arvin ye",
        lightbox: true,
        animate: true
    }
</script>



    <link rel="stylesheet" href="/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">









    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


</head>
<body>
    <div class="progress">
    <div class="progress-inner"></div>
</div>
    <div class="body">
    <div class="tagcloud-mask"></div>  
<div class="tagcloud" id="tagcloud">
    <div class="tagcloud-inner">
        <a href="/tags/AMD-UMD-CMD-commonJS-ES6-module/" style="font-size: 14px;">AMD - UMD - CMD - commonJS - ES6 module</a> <a href="/tags/CSSOM视图模式/" style="font-size: 14px;">CSSOM视图模式</a> <a href="/tags/ES6解构赋值/" style="font-size: 14px;">ES6解构赋值</a> <a href="/tags/Generator/" style="font-size: 14px;">Generator</a> <a href="/tags/JS执行顺序/" style="font-size: 14px;">JS执行顺序</a> <a href="/tags/Promise/" style="font-size: 14px;">Promise</a> <a href="/tags/apply/" style="font-size: 14px;">apply</a> <a href="/tags/asyn-await/" style="font-size: 14px;">asyn...await</a> <a href="/tags/bind/" style="font-size: 14px;">bind</a> <a href="/tags/call/" style="font-size: 14px;">call</a> <a href="/tags/contenteditable/" style="font-size: 14px;">contenteditable</a> <a href="/tags/echarts/" style="font-size: 14px;">echarts</a> <a href="/tags/interator/" style="font-size: 14px;">interator</a> <a href="/tags/scroll/" style="font-size: 14px;">scroll</a> <a href="/tags/sticky/" style="font-size: 14px;">sticky</a> <a href="/tags/vuex/" style="font-size: 14px;">vuex</a> <a href="/tags/webkit/" style="font-size: 14px;">webkit</a> <a href="/tags/代理/" style="font-size: 14px;">代理</a> <a href="/tags/创建对象/" style="font-size: 14px;">创建对象</a> <a href="/tags/原型链/" style="font-size: 14px;">原型链</a> <a href="/tags/变量声名/" style="font-size: 14px;">变量声名</a> <a href="/tags/回调/" style="font-size: 14px;">回调</a> <a href="/tags/块级作用域/" style="font-size: 14px;">块级作用域</a> <a href="/tags/垂直居中/" style="font-size: 14px;">垂直居中</a> <a href="/tags/层叠水平/" style="font-size: 14px;">层叠水平</a> <a href="/tags/性能/" style="font-size: 14px;">性能</a> <a href="/tags/排序/" style="font-size: 14px;">排序</a> <a href="/tags/数组/" style="font-size: 14px;">数组</a> <a href="/tags/数组遍历/" style="font-size: 14px;">数组遍历</a> <a href="/tags/正则表达式/" style="font-size: 14px;">正则表达式</a> <a href="/tags/线程/" style="font-size: 14px;">线程</a> <a href="/tags/继承-原型链/" style="font-size: 14px;">继承 - 原型链</a> <a href="/tags/轮播/" style="font-size: 14px;">轮播</a> <a href="/tags/闭包/" style="font-size: 14px;">闭包</a> <a href="/tags/隐式转换/" style="font-size: 14px;">隐式转换</a>
    </div>
</div>
    <header class="header" id="header">
    <div class="title syuanpi tvIn">
    <div class="table">
        <div class="connect">
            <div class="connect-inner">
                <span><a href="/">yjm</a></span>
                
            </div>
        </div>
    </div>
</div>
    <nav class="main-nav syuanpi tvIn">
<div class="table">

    <ul class="menu">
        
        <li class="menu-item">
            <a href="javascript:;" id="search">
                <span>搜索</span>
                
                    <span class="menu-item-label">search</span>
                
            </a>
        </li>
        
        
        
            <li class="menu-item">
                <a href="/">
                    <span>文章</span>
                    
                        <span class="menu-item-label">article</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/archives">
                    <span>归档</span>
                    
                        <span class="menu-item-label">archives</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="javascript:;" id="tags">
                    <span>标签</span>
                    
                        <span class="menu-item-label">tags</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/about">
                    <span>关于</span>
                    
                        <span class="menu-item-label">about</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/atom.xml">
                    <span>订阅</span>
                    
                        <span class="menu-item-label">RSS</span>
                    
                </a>
            </li>
        
        
    </ul>

</div>
</nav>
</header>
<div class="mobile-header">
    <div class="mobile-header-body">
        <div class="mobile-header-list">
            
            
                <div class="mobile-nav-item">
                    <a href="/">
                        <span>文章</span>
                        
                            <span class="menu-item-label">article</span>
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/archives">
                        <span>归档</span>
                        
                            <span class="menu-item-label">archives</span>
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item inner-cloud">
                    <div class="mobile-nav-tag">
                        <a href="javascript:;" id="mobile-tags">
                            <span>标签</span>
                            
                                <span class="menu-item-label">tags</span>
                            
                        </a>
                    </div>
                    <div class="mobile-nav-tagcloud">
                        <div class="mobile-tagcloud-inner">
                            <a href="/tags/AMD-UMD-CMD-commonJS-ES6-module/" style="font-size: 14px;">AMD - UMD - CMD - commonJS - ES6 module</a> <a href="/tags/CSSOM视图模式/" style="font-size: 14px;">CSSOM视图模式</a> <a href="/tags/ES6解构赋值/" style="font-size: 14px;">ES6解构赋值</a> <a href="/tags/Generator/" style="font-size: 14px;">Generator</a> <a href="/tags/JS执行顺序/" style="font-size: 14px;">JS执行顺序</a> <a href="/tags/Promise/" style="font-size: 14px;">Promise</a> <a href="/tags/apply/" style="font-size: 14px;">apply</a> <a href="/tags/asyn-await/" style="font-size: 14px;">asyn...await</a> <a href="/tags/bind/" style="font-size: 14px;">bind</a> <a href="/tags/call/" style="font-size: 14px;">call</a> <a href="/tags/contenteditable/" style="font-size: 14px;">contenteditable</a> <a href="/tags/echarts/" style="font-size: 14px;">echarts</a> <a href="/tags/interator/" style="font-size: 14px;">interator</a> <a href="/tags/scroll/" style="font-size: 14px;">scroll</a> <a href="/tags/sticky/" style="font-size: 14px;">sticky</a> <a href="/tags/vuex/" style="font-size: 14px;">vuex</a> <a href="/tags/webkit/" style="font-size: 14px;">webkit</a> <a href="/tags/代理/" style="font-size: 14px;">代理</a> <a href="/tags/创建对象/" style="font-size: 14px;">创建对象</a> <a href="/tags/原型链/" style="font-size: 14px;">原型链</a> <a href="/tags/变量声名/" style="font-size: 14px;">变量声名</a> <a href="/tags/回调/" style="font-size: 14px;">回调</a> <a href="/tags/块级作用域/" style="font-size: 14px;">块级作用域</a> <a href="/tags/垂直居中/" style="font-size: 14px;">垂直居中</a> <a href="/tags/层叠水平/" style="font-size: 14px;">层叠水平</a> <a href="/tags/性能/" style="font-size: 14px;">性能</a> <a href="/tags/排序/" style="font-size: 14px;">排序</a> <a href="/tags/数组/" style="font-size: 14px;">数组</a> <a href="/tags/数组遍历/" style="font-size: 14px;">数组遍历</a> <a href="/tags/正则表达式/" style="font-size: 14px;">正则表达式</a> <a href="/tags/线程/" style="font-size: 14px;">线程</a> <a href="/tags/继承-原型链/" style="font-size: 14px;">继承 - 原型链</a> <a href="/tags/轮播/" style="font-size: 14px;">轮播</a> <a href="/tags/闭包/" style="font-size: 14px;">闭包</a> <a href="/tags/隐式转换/" style="font-size: 14px;">隐式转换</a>
                        </div>
                    </div>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/about">
                        <span>关于</span>
                        
                            <span class="menu-item-label">about</span>
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/atom.xml">
                        <span>订阅</span>
                        
                            <span class="menu-item-label">RSS</span>
                        
                    </a>
                </div>
            
            
        </div>
    </div>
    <div class="mobile-header-nav">
        <div class="mobile-header-item" id="mobile-left">
            <div class="header-menu-item">
                <span class="header-menu-line"></span>
            </div>
        </div>
        <h1 class="mobile-header-title">
            <a href="/">yjm</a>
        </h1>
        <div class="mobile-header-item"></div>
    </div>
</div>

    <div class="container">
        <main class="main" id="main">
            
    
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年8月22日</span>
                
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                vuex总结
            
            </h1>
            
                
                    <div class="post-tags syuanpi riseIn-light back-3">
                    
                        <a href="/tags/vuex/">vuex</a>
                    
                    </div>
                
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                <h2 id="state"><a href="#state" class="headerlink" title="state"></a>state</h2><ul>
<li>作用：相当于vue中的data，用于存储状态，是<strong>唯一数据源</strong>，而是只读，不能做直接修改。</li>
<li>语法：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</div><div class="line">  state: &#123;</div><div class="line">    text:<span class="string">'hello world'</span></div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>调用：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 方法1</span></div><div class="line">store.state.text</div><div class="line"><span class="comment">// 方法2（需要使用vue.use注入）</span></div><div class="line"><span class="keyword">this</span>.$store.state.text</div><div class="line"><span class="comment">// 方法3，通过辅助函数mapState</span></div><div class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">'vuex'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    computed: &#123;</div><div class="line">        <span class="comment">// 使用ES6的扩展运算符来达到将state释放出来</span></div><div class="line">        ...mapState([</div><div class="line">          <span class="comment">// 映射 this.text 为 store.state.text</span></div><div class="line">          <span class="string">'text'</span></div><div class="line">        ])</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>注意：</strong>如果一般state初始化时最好就设置好所需属性，如果真的需要动态需改某一个属性，可以如下：<br>1）Vue.set(obj, ‘newProp’, 123)<br>2）state.obj = { …state.obj, newProp: 123 }</p>
<h2 id="getter"><a href="#getter" class="headerlink" title="getter"></a>getter</h2><ul>
<li>作用：相当于vue中的computed，作用也是类似的。</li>
<li>语法：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</div><div class="line">  state: &#123;</div><div class="line">    text:<span class="string">'hello world'</span></div><div class="line">  &#125;,</div><div class="line">  getters: &#123;</div><div class="line">    <span class="comment">// 第一个参数固定是state对象，第二个参数固定是getters对象</span></div><div class="line">    getText: <span class="function">(<span class="params">state, getters</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> state.text + <span class="string">' xiaoming'</span>;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// getters方法中调用getters方法</span></div><div class="line">    getGettersText: <span class="function">(<span class="params">state, getters</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> getters.getText;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// getters方法返回一个函数</span></div><div class="line">    getFuncText: <span class="function">(<span class="params">state,getters</span>) =&gt;</span> (name) =&gt; &#123;</div><div class="line">        <span class="keyword">return</span> state.text + <span class="string">' '</span> + name;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>调用：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 方法1</span></div><div class="line">store.getters.getText</div><div class="line"><span class="comment">// 方法2</span></div><div class="line"><span class="keyword">this</span>.$store.getters.getText</div><div class="line"><span class="comment">// 方法3，通过辅助函数mapGetters</span></div><div class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    computed: &#123;</div><div class="line">        ...mapGetters([</div><div class="line">            <span class="string">'getText'</span>,</div><div class="line">            <span class="string">'getGettersText'</span>,</div><div class="line">            <span class="string">'getFuncText'</span></div><div class="line">        ])</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="mutation"><a href="#mutation" class="headerlink" title="mutation"></a>mutation</h2><ul>
<li><p>作用：相当于vue中data对象的的set方法，是唯一可以改变state数据的方式，定位是<strong>同步改变</strong>，即在mutation的方法中不支持异步逻辑，这个的具体原因是因为mutation类似于事件监听的回调函数，而任何在回调函数中进行的状态的改变都是不可追踪的。</p>
</li>
<li><p>语法：</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</div><div class="line">  state: &#123;</div><div class="line">    text:<span class="string">'hello world'</span></div><div class="line">  &#125;,</div><div class="line">  mutations: &#123;</div><div class="line">    <span class="comment">// 第一个参数固定是state，剩下还可以再传入一个或0个参数（也叫载荷），这个载荷参数一般是对象，方便传入多个值</span></div><div class="line">    changeText (state, payload) &#123;</div><div class="line">      <span class="comment">// 变更状态</span></div><div class="line">      state.text = <span class="string">'welcome'</span> + payload.name;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>调用：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 方法1，只是第二个参数是载荷</span></div><div class="line">store.commit(<span class="string">'changeText'</span>, &#123;</div><div class="line">    name: <span class="string">'xiaoye'</span></div><div class="line">&#125;)</div><div class="line"><span class="comment">// 方法2，相当于整个对象都是载荷</span></div><div class="line">store.commit(&#123;</div><div class="line">    type: <span class="string">'changeText'</span>,</div><div class="line">    name: <span class="string">'xiaoye'</span></div><div class="line">&#125;)</div><div class="line"><span class="comment">// 方法3</span></div><div class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'changeText'</span>, &#123;</div><div class="line">    name: <span class="string">'xiaoye'</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// 方法4，依赖辅助函数mapMutations </span></div><div class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">'vuex'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  methods: &#123;</div><div class="line">  <span class="comment">// 将this.changeText(&#123;name: 'xiaoye'&#125;)映射为this.$store.commit('changeText', &#123;name: 'xiaoye'&#125;);</span></div><div class="line">    ...mapMutations([</div><div class="line">      <span class="string">'changeText'</span></div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="action"><a href="#action" class="headerlink" title="action"></a>action</h2><ul>
<li><p>作用：相当于vue中的method，<strong>不能</strong>直接修改state，<strong>只能</strong>通过调用mutation中的方法间接改变state，定位是<strong>异步改变</strong>，当然也可以同步，如果是需要异步改变的逻辑建议写在action中，其实用过action就知道，其实就相当于把本来属于vue中的method中的方法放到vuex中的action中来而已，只是说公共的异步请求不再用写那么多份在不同的method中，只需要写一份放在action中即可。</p>
</li>
<li><p>语法：</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</div><div class="line">  state: &#123;</div><div class="line">    text:<span class="string">'hello world'</span></div><div class="line">  &#125;,</div><div class="line">  mutations: &#123;</div><div class="line">    <span class="comment">// 第一个参数固定是state，剩下还可以再传入一个或0个参数（也叫载荷），这个载荷参数一般是对象，方便传入多个值</span></div><div class="line">    changeText (state, payload) &#123;</div><div class="line">      <span class="comment">// 变更状态</span></div><div class="line">      state.text = <span class="string">'welcome'</span> + payload.name;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  actions: &#123;</div><div class="line">    <span class="comment">// 第一个参数是固定的一个类似store的实例，具有和store实例相同方法和属性，即可以直接调用state，getters，commit，dispatch等；第二个参数同mutations一样，是载荷</span></div><div class="line">    asynChangeText (context, payload) &#123;</div><div class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">          context.commit(<span class="string">'changeText'</span>, payload.asynName)</div><div class="line">        &#125;, <span class="number">1000</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>调用：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 方法1</span></div><div class="line">store.dispatch(<span class="string">'asynChangeText'</span>, &#123;</div><div class="line">  asynName: <span class="string">'xiaoMing'</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// 方法2</span></div><div class="line">store.dispatch(&#123;</div><div class="line">  type: <span class="string">'asynChangeText'</span>,</div><div class="line">  asynName: <span class="string">'xiaoMing'</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// 方法3</span></div><div class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'asynChangeText'</span>, &#123;</div><div class="line">    asynName: <span class="string">'xiaoMing'</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// 方法4，依赖辅助函数mapActions</span></div><div class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">'vuex'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// 用法同 mutation 一样</span></div><div class="line">  methods: &#123;</div><div class="line">    ...mapActions([</div><div class="line">      <span class="string">'asynChangeText'</span></div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="module"><a href="#module" class="headerlink" title="module"></a>module</h2><ul>
<li><p>作用：将<strong>state模块化和嵌套子模块化</strong>，避免state过大，而变得臃肿，不方便管理，每一个模块都包含完整的state、actions、mutations、getters。</p>
</li>
<li><p>语法1（默认命名空间）：</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> ** 模块化（默认命名空间）</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">const</span> moduleA = &#123;</div><div class="line">  state: &#123;</div><div class="line">    a: <span class="number">1</span>,</div><div class="line">  &#125;,</div><div class="line">  mutations: &#123;</div><div class="line">    <span class="comment">// 该state包含的是本模块自己以及子模块的state</span></div><div class="line">    setA (state, payload) &#123;&#125;</div><div class="line">  &#125;,</div><div class="line">  actions: &#123;</div><div class="line">    <span class="comment">// 该context除包含本模块自己以及子模块的属性和方法外，还另外多包含rootGetters和rootState两个属性根模块（moduleA）的state和getter</span></div><div class="line">     getAsynA (context, payload) &#123;&#125;</div><div class="line">  &#125;,</div><div class="line">  getters: &#123;</div><div class="line">    <span class="comment">// 这里的rootState和rootGetter等同于根模块（moduleA）的state和getter</span></div><div class="line">    getA (state, getters, rootState, rootGetter) &#123;&#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// 两个子模块</span></div><div class="line">  modules: &#123;</div><div class="line">    moduleB,</div><div class="line">    moduleC</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 和moduleA模块一样，只是rootState和rootGetter依然表示moduleA这个跟模块而已</span></div><div class="line"><span class="keyword">const</span> moduleB = &#123;</div><div class="line">  state: &#123;  &#125;,</div><div class="line">  mutations: &#123; ... &#125;,</div><div class="line">  actions: &#123; ... &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 同moduleB</span></div><div class="line"><span class="keyword">const</span> moduleC = &#123;</div><div class="line">  state: &#123; ... &#125;,</div><div class="line">  mutations: &#123; ... &#125;,</div><div class="line">  actions: &#123; ... &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(moduleA)</div></pre></td></tr></table></figure>
<p><strong>注意：</strong>在默认的命名空间中：<br>1）所有的模块和子模块的mutations和actions都是包含在全局中的，也叫在<strong>全局命名空间</strong>中。也就是说如果不同的模块中有相同的actions或者mutations是会存在重复注册挂载到全局中的情况的，只不过他们<strong>不是覆盖而是追加</strong>的关系而已，被调用的顺讯也是按照<strong>模块的注册顺序递归调用</strong>的。</p>
<p>2）所有模块和子模块的getters都是包含在全局中的，不过不同的是如果出现不同模块之间重名的情况，不是追加而是<strong>先到先得</strong>，即哪一个模块先注册，即使用谁的。</p>
<p>3）而state是仍然是划分模块的，外部如果要调用，调用方式也是按照<strong>模块的层级路径</strong>来调用的。即：<strong>moduleA的状态：store.state；moduleB的状态：store.state.moduleB</strong>。</p>
<ul>
<li>调用：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 调用state，方法1</span></div><div class="line">store.state.a</div><div class="line">store.state.moduleB.b</div><div class="line"><span class="comment">// 调用state，方法2</span></div><div class="line"><span class="keyword">this</span>.$store.state.a</div><div class="line"><span class="keyword">this</span>.$store.state.moduleB.b</div><div class="line"><span class="comment">// 调用state，方法3</span></div><div class="line"><span class="keyword">import</span> &#123;mapState&#125; <span class="keyword">from</span> <span class="string">'vuex'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    computed: &#123;</div><div class="line">        ...mapState([</div><div class="line">            <span class="string">'a'</span>,        <span class="comment">// 是moduleA的state</span></div><div class="line">            <span class="string">'moduleB'</span>,   <span class="comment">// moduleB是一个对象，包含自己以及子模块的state</span></div><div class="line">            <span class="string">'c'</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.a.moduleC.c <span class="comment">// moduleC模块下的state可以通过这种方法的形式返回值</span></div><div class="line">        ])</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 调用getter，方法1</span></div><div class="line">store.getters.getA</div><div class="line">store.getters.getB</div><div class="line"><span class="comment">// 调用getter，方法2</span></div><div class="line"><span class="keyword">this</span>.$store.getters.getA</div><div class="line"><span class="keyword">this</span>.$store.getters.getB</div><div class="line"><span class="comment">// 调用getter，方法3</span></div><div class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    computed: &#123;</div><div class="line">        ...mapGetters([</div><div class="line">            <span class="string">'getA'</span>,</div><div class="line">            <span class="string">'getB'</span></div><div class="line">        ])</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 调用mutations，方法1，和getter相同点都是挂载在全局中，不同点是不同模块中存在相同名称是会按顺序触发的</span></div><div class="line">store.commit(<span class="string">'setA'</span>)</div><div class="line">store.commit(<span class="string">'setB'</span>)</div><div class="line"><span class="comment">// 调用mutations，方法2</span></div><div class="line">store.commit(&#123;</div><div class="line">    type: <span class="string">'setA'</span></div><div class="line">&#125;)</div><div class="line"><span class="comment">// 调用mutations，方法3</span></div><div class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'setA'</span>)</div><div class="line"><span class="comment">// 调用mutations，方法4</span></div><div class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">'vuex'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  methods: &#123;</div><div class="line">    ...mapMutations([</div><div class="line">      <span class="string">'setA'</span></div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 调用actions，同mutations一样</span></div></pre></td></tr></table></figure>
<ul>
<li>语法2（命名空间）：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> ** 模块化（命名空间）</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">const</span> moduleA = &#123;</div><div class="line">  namespaced: <span class="literal">true</span>,</div><div class="line">  state: &#123;</div><div class="line">    a: <span class="number">1</span>,</div><div class="line">  &#125;,</div><div class="line">  mutations: &#123;</div><div class="line">    <span class="comment">// 该state包含的是本模块自己以及子模块的state</span></div><div class="line">    setA (state, payload) &#123;&#125;</div><div class="line">  &#125;,</div><div class="line">  actions: &#123;</div><div class="line">    <span class="comment">// 该context除包含本模块自己以及子模块的属性和方法外，还另外多包含rootGetters和rootState两个属性根模块（moduleA）的state和getter</span></div><div class="line">     getAsynA (context, payload) &#123;&#125;</div><div class="line">  &#125;,</div><div class="line">  getters: &#123;</div><div class="line">    <span class="comment">// 这里的rootState和rootGetter等同于根模块（moduleA）的state和getter</span></div><div class="line">    getA (state, getters, rootState, rootGetter) &#123;&#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// 两个子模块</span></div><div class="line">  modules: &#123;</div><div class="line">    moduleB,</div><div class="line">    moduleC</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 和moduleA模块一样，只是rootState和rootGetter依然表示moduleA这个跟模块而已</span></div><div class="line"><span class="keyword">const</span> moduleB = &#123;</div><div class="line">  <span class="comment">//  namespaced: true, // 这里如果不设置命名空间的话那moduleC就继承父命名空间</span></div><div class="line">  state: &#123;  &#125;,</div><div class="line">  mutations: &#123; ... &#125;,</div><div class="line">  actions: &#123; ... &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 同moduleB</span></div><div class="line"><span class="keyword">const</span> moduleC = &#123;</div><div class="line">  namespaced: <span class="literal">true</span>,</div><div class="line">  state: &#123; ... &#125;,</div><div class="line">  mutations: &#123; ... &#125;,</div><div class="line">  actions: &#123; ... &#125;,</div><div class="line">  modules: &#123;</div><div class="line">        moduleD: &#123;</div><div class="line">            namespaced: <span class="literal">true</span>,</div><div class="line">            state: &#123;</div><div class="line">                d: <span class="number">1</span>,</div><div class="line">            &#125;,</div><div class="line">            mutations: &#123;&#125;,</div><div class="line">            actions: &#123;&#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(moduleA)</div></pre></td></tr></table></figure>
<p><strong>注意：</strong>在命名空间中：<br>1）所有的模块和子模块的mutations、actions、getters都是包含在<strong>各自的命名空间或父命名空间中</strong>，即<strong>自动根据模块注册的路径调整命名</strong>。</p>
<p>2）而state不受影响，因为默认state也已经是层级嵌套的了。</p>
<ul>
<li>调用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 调用state，方法4（前三个方法和默认命名空间类似）</span></div><div class="line">computed: &#123;</div><div class="line">  ...mapState(<span class="string">'moduleC/moduleD'</span>, &#123;</div><div class="line">    d: <span class="function"><span class="params">state</span> =&gt;</span> state.d</div><div class="line">  &#125;),</div><div class="line">  ...mapState(<span class="string">'moduleC/moduleD'</span>, [<span class="string">'d'</span>]) <span class="comment">// 这两种是一样的，只是写法不同</span></div><div class="line">&#125;,</div><div class="line"><span class="comment">// 调用state，方法5（通过辅助函数createNamespacedHelpers）</span></div><div class="line"><span class="keyword">import</span> &#123; createNamespacedHelpers &#125; <span class="keyword">from</span> <span class="string">'vuex'</span>;</div><div class="line"><span class="keyword">const</span> &#123; mapState &#125; = createNamespacedHelpers(<span class="string">'moduleC/moduleD'</span>);</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  computed: &#123;</div><div class="line">    <span class="comment">// 在 `moduleC/moduleD` 中查找</span></div><div class="line">    ...mapState(&#123;</div><div class="line">      d: <span class="function"><span class="params">state</span> =&gt;</span> state.d</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 其他的getter、mutations、actions也是和state类似的以上的方法</span></div></pre></td></tr></table></figure>
<h2 id="plugins"><a href="#plugins" class="headerlink" title="plugins"></a>plugins</h2><ul>
<li><p>作用：plugins 是vuex中的一个函数，一般配合 subscribe 函数实现类似于拦截器的效果，而且是一个成功之后的拦截器，是每次 mutation 调用成功之后的钩子，它接收store 实例作为作为唯一的参数。</p>
</li>
<li><p>语法：</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> myPlugin = <span class="function"><span class="params">store</span> =&gt;</span> &#123;</div><div class="line">    <span class="comment">// mutation 的格式为：&#123; type, payload &#125;，通过这个对象可以判断是哪一个 mutation 被调用了，额外的参数是什么。</span></div><div class="line">    store.subscribe(<span class="function">(<span class="params">mutation, state</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">if</span> (mutation.type === <span class="string">'updateA'</span>) &#123;</div><div class="line">            <span class="built_in">console</span>.log(mutation)</div><div class="line">            <span class="built_in">console</span>.log(state)</div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> moduleA = &#123;</div><div class="line">    state: &#123;</div><div class="line">        a: <span class="number">1</span>,</div><div class="line">    &#125;,</div><div class="line">    mutations: &#123;</div><div class="line">        <span class="comment">// 被调用完成之后会触发 myPlugin 中的 subscribe 回调</span></div><div class="line">        updateA (context, payload) &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'A'</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    actions: &#123;...&#125;,</div><div class="line">    getters: &#123;...&#125;,</div><div class="line">    modules: &#123;...&#125;,</div><div class="line">    plugins: [myPlugin]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(moduleA);</div></pre></td></tr></table></figure>
<p><strong>注意：</strong>在插件中如果要修改state状态，也需要通过store调用commit，从而触发 mutation 改变state的状态，也就是说不能直接修改state状态。</p>
<h2 id="strict"><a href="#strict" class="headerlink" title="strict"></a>strict</h2><ul>
<li><p>上面一直强调就是修改只能在 mutations 中完成，为了强制约束，可是在vuex实例化的时候传入该属性（严格模式）。</p>
</li>
<li><p>语法</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> moduleA = &#123;</div><div class="line">    state: &#123;...&#125;,</div><div class="line">    mutations: &#123;...&#125;,</div><div class="line">    actions: &#123;...&#125;,</div><div class="line">    getters: &#123;...&#125;,</div><div class="line">    modules: &#123;...&#125;,</div><div class="line">    plugins: [...],</div><div class="line">    strict: <span class="literal">true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(moduleA);</div></pre></td></tr></table></figure>

            
        
        </div>
        
            
            
        
    </article>
    
        
    <nav class="article-page">
        
            <a href="/2017/08/22/ES5和ES6中的变量声明提升/" id="art-left" class="art-right">
                <span class="next-title">
                    ES5和ES6中的变量声明提升<i class="iconfont icon-right"></i> 
                </span>
            </a>
        
        
            <a href="/2017/08/22/闭包/" id="art-right" class="art-left">
                <span class="prev-title"> 
                    <i class="iconfont icon-left"></i>闭包
                </span>
            </a>
        
    </nav>

        
    


        </main>
        <footer class="footer syuanpi fadeIn" id="footer">
    <hr>
    <div class="footer-wrapper">
        <div class="left">
            <div class="contact-icon">
    
    
    
    
    
    
    
    
        
            <a href="https://github.com/yejiaming" class="iconfont icon-github" title="github"></a>
        
        
        
        
        
        
        
    
</div>
        </div>
        <div class="right">
            <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>2017 ~ 2018</span>
        <span>❤</span>
        <span>arvin ye</span>
    </div>
    <div class="theme">
        <span>
            动力来源于
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            主题
            <a href="https://github.com/ColMugX/hexo-theme-Nlvi"> Nlvi </a>
        </span>
    </div>
    
    <div class="visit_count">
        <i class="iconfont icon-visit"></i>
        <span id="busuanzi_value_site_uv"></span>
        <i class="iconfont icon-people"></i>
        <span id="busuanzi_value_site_pv"></span>
    </div>
    
</div>
        </div>
    </div>
</footer>
    </div>
    <script src="/script/nlvi.js"></script>
<script src="/script/search.js"></script>

    <script src="/lightbox/js/lightbox.min.js"></script>

<script>
$(document).ready(function(){
    document.body.addEventListener('touchstart', function () {});
    $('.progress').hide();
    $('.body').show();
    Nlvi.tagcloud();
    Nlvi.mobileHeader();
    Nlvi.back2top();
    Nlvi.smoothScroll();
    Nlvi.onView();
    Nlvi.showToc();
    Nlvi.showComments();
    Nlvi.showReward();

    !CONFIG.animate && Nlvi.offAnimate();
    CONFIG.lightbox && Nlvi.onPicBox();
})
</script>
    </div>
    
        
    
    <div class="backtop syuanpi dead toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>
    
    <div class="search" id="search">
        <div class="mask" id="mask"></div>
        <div class="search-wrapper syuanpi">
            <h1 id="search-header" class="syuanpi">搜索一下？</h1>
            <div class="input">
                <input type="text" id="local-search-input" results="0" name="">
            </div>
            <div id="local-search-result"></div>
        </div>
    </div>
    <script>
    var GREETING = {
        morning: "当我们探索时，就要发现到真理",
        noon: "人的天职在于勇于探索真理。",
        after: "一件事实是一条没有性别的真理",
        night: "真理有时可能变得黯淡，但它永远不会熄灭",
        midnight: "真理在人那里获得生命力，并且展现出来"
    }
    $(document).ready(function(){
        Nlvi.search();
    });
    </script>

</body>
</html>
